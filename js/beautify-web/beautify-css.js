function css_beautify(e,n){function i(){return b=e.charAt(++L),b||""}function s(n){var s=L;return n&&u(),result=e.charAt(L+1)||"",L=s-1,i(),result}function t(n){for(var s=L;i();)if("\\"===b)i();else{if(-1!==n.indexOf(b))break;if("\n"===b)break}return e.substring(s,L+1)}function r(e){var n=L,s=t(e);return L=n-1,i(),s}function u(){for(var e="";y.test(s());)i(),e+=b;return e}function a(){var e="";for(b&&y.test(b)&&(e=b);y.test(i());)e+=b;return e}function f(n){var t=L,n="/"===s();for(i();i();){if(!n&&"*"===b&&"/"===s()){i();break}if(n&&"\n"===b)return e.substring(t,L)}return e.substring(t,L)+b}function c(n){return e.substring(L-n.length,L).toLowerCase()===n}function p(){for(var n=L+1;n<e.length;n++){var i=e.charAt(n);if("{"===i)return!0;if(";"===i||"}"===i||")"===i)return!1}return!1}function o(){m++,v+=S}function l(){m--,v=v.slice(0,-h)}n=n||{};var h=n.indent_size||4,_=n.indent_char||" ",w=void 0===n.selector_separator_newline?!0:n.selector_separator_newline,d=void 0===n.end_with_newline?!1:n.end_with_newline,g=void 0===n.newline_between_rules?!0:n.newline_between_rules;"string"==typeof h&&(h=parseInt(h,10));var b,y=/^\s+$/,L=-1,v=e.match(/^[\t ]*/)[0],S=new Array(h+1).join(_),m=0,O=0,A={};A["{"]=function(e){A.singleSpace(),E.push(e),A.newLine()},A["}"]=function(e){A.newLine(),E.push(e),A.newLine()},A._lastCharWhitespace=function(){return y.test(E[E.length-1])},A.newLine=function(e){e||A.trim(),E.length&&E.push("\n"),v&&E.push(v)},A.singleSpace=function(){E.length&&!A._lastCharWhitespace()&&E.push(" ")},A.trim=function(){for(;A._lastCharWhitespace();)E.pop()};var E=[];v&&E.push(v);for(var C=!1,N=!1,R="",T="";;){var U=a(),k=""!==U,x=-1!==U.indexOf("\n"),T=R,R=b;if(!b)break;if("/"===b&&"*"===s()){var I=c("");A.newLine(),E.push(f()),A.newLine(),I&&A.newLine(!0)}else if("/"===b&&"/"===s())x||"{"===T||A.trim(),A.singleSpace(),E.push(f()),A.newLine();else if("@"===b){k&&A.singleSpace(),E.push(b);var D=r(": ,;{}()[]/='\"").replace(/\s$/,"");D in css_beautify.NESTED_AT_RULE?(O+=1,D in css_beautify.CONDITIONAL_GROUP_RULE&&(N=!0)):": ".indexOf(D[D.length-1])>=0&&(i(),D=t(": ").replace(/\s$/,""),E.push(D),A.singleSpace())}else"{"===b?"}"===s(!0)?(u(),i(),A.singleSpace(),E.push("{}"),A.newLine(),g&&0===m&&A.newLine(!0)):(o(),A["{"](b),N?(N=!1,C=m>O):C=m>=O):"}"===b?(l(),A["}"](b),C=!1,O&&O--,g&&0===m&&A.newLine(!0)):":"===b?(u(),!C&&!N||c("&")||p()?":"===s()?(i(),E.push("::")):E.push(":"):(E.push(":"),A.singleSpace())):'"'===b||"'"===b?(k&&A.singleSpace(),E.push(t(b))):";"===b?(E.push(b),A.newLine()):"("===b?c("url")?(E.push(b),u(),i()&&(")"!==b&&'"'!==b&&"'"!==b?E.push(t(")")):L--)):(k&&A.singleSpace(),E.push(b),u()):")"===b?E.push(b):","===b?(E.push(b),u(),!C&&w?A.newLine():A.singleSpace()):"]"===b?E.push(b):"["===b?(k&&A.singleSpace(),E.push(b)):"="===b?(u(),E.push(b)):(k&&A.singleSpace(),E.push(b))}var $=E.join("").replace(/[\r\n\t ]+$/,"");return d&&($+="\n"),$}css_beautify.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},css_beautify.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof define&&define.amd?define([],function(){return{css_beautify:css_beautify}}):"undefined"!=typeof exports?exports.css_beautify=css_beautify:"undefined"!=typeof window?window.css_beautify=css_beautify:"undefined"!=typeof global&&(global.css_beautify=css_beautify);